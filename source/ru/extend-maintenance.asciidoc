[[extend-maintenance]]

=== Включение и выключение Режима обслуживания

[role="summary"]
Как включить режим обслуживания, чтобы настроить сообщение «Сайт находится в режиме обслуживания», и как его отключить.

(((Режим обслуживания,обзор)))
(((Режим обслуживания,включение)))
(((Режим обслуживания,отключение)))

==== Цель

Переведите ваш сайт в режим обслуживания, чтобы пользователи с правами доступа могли
использовать сайт, в то время как пользователи без этого разрешения получат сообщение
что сайт находится в режиме обслуживания.

==== Необходимые знания

<<security-concept>>

==== Требования к сайту

Если вы хотите использовать Drush, чтобы включать и выключать режим обслуживания, Drush должен быть
установлен. Смотрите <<install-tools>>.

==== Шаги

Вы можете использовать административное меню или Drush для включения или выключения
режима обслуживания.

===== Включение режима обслуживание через административный интерфейс

. В _Управлении_ административного меню, перейдите в _Конфигурация_ >
_Разработка_ > _Режим обслуживания_ (_admin/config/development/maintenance_).
появится страница _Режим обслуживания_.

. Заполните поля, как показано ниже.
+
[width="100%",frame="topbot",options="header"]
|================================
|Имя поля | Объяснение | Значение

| Перевести сайт в режим обслуживания | Включить режим обслуживания |
Checked

| Сообщение о том, что сайт находится в режиме технического обслуживания |Информация, которая отображается
посетителям сайта при включенном режиме. Можно использовать такие переменные, как @site
в сообщении |@site в настоящее время находится на обслуживании, но должен вернуться
в ближайшее время. Спасибо за терпение.

|================================

. Нажмите _Сохранить конфигурацию_.

. Убедитесь, что сайт находится в режиме обслуживания, открыв его с другого
браузера, где вы не вошли в систему. Если вы не можете проверить, попробуйте сбросить
кэш. Смотрите <<prevent-cache-clear>>.
+
--
// Site in maintenance mode.
image:images/extend-maintenance-mode-enabled.png["Режим обслуживания включен",width="100%"]
--

===== Отключение режима обслуживания с использованием административного интерфейса

. В _Управлении_ административного меню, перейдите в _Конфигурация_ >
_Разработка_ > _Режим обслуживания_ (_admin/config/development/maintenance_).
Появится страница _Режим обслуживания_.

. Заполните поля, как показано ниже.
+
[width="100%",frame="topbot",options="header"]
|================================
|Имя поля | Объяснение | Значение

| Перевести сайт в режим обслуживания | Выключить режим обслуживания |
Checked

| Сообщение о том, что сайт находится в режиме технического обслуживания | При отключении сообщения не требуется. Вы можете оставить поле пустым. |

|================================

. Нажмите _Сохранить конфигурацию_.

. Убедитесь, что сайт больше не находится в режиме обслуживания, получив доступ к нему из
другого браузера, где вы не вошли в систему. Если вы не можете проверить, попробуйте сбросить
кэш. Смотрите <<prevent-cache-clear>>.
+
--
// Site no longer in maintenance mode.
image:images/extend-maintenance-mode-disabled.png["Режим обслуживания отключен",width="100%"]
--

===== Включение или отключение режима обслуживания с помощью Drush

. Выполните действия, описанные выше, для редактирования сообщения об обслуживании сайта, если
это нужно.

. Выполните следующие команды Drush, чтобы включить режим обслуживания и очистить
кэш:
+
----
drush state:set system.maintenance_mode 1 --input-format=integer
drush cache:rebuild
----

. Выполните следующие команды Drush, чтобы отключить режим обслуживания и очистить
кэш:
+
----
drush state:set system.maintenance_mode 0 --input-format=integer
drush cache:rebuild
----

. После запуска любого набора команд убедитесь, что ваш сайт находится в или
вне режима обслуживания посетив сайт в браузере, где вы не
авторизованы.

==== Расширьте своё понимание

* <<security-update-core>>

* <<security-update-theme>>

* <<security-update-module>>

//==== Related concepts

==== Видео

// Video from Drupalize.Me.
video::https://www.youtube-nocookie.com/embed/IQbqQs5h03Q[title="Enabling and Disabling Maintenance Mode"]

// ==== Additional resources


*Авторы*

Написано и отредактировано https://www.drupal.org/u/batigolix[Boris Doesborg],
https://www.drupal.org/u/jojyja[Jojy Alphonso] в
http://redcrackle.com[Red Crackle], и
https://www.drupal.org/u/jhodgdon[Jennifer Hodgdon].

Переведено https://www.drupal.org/u/MishaIsmajlov[Михаил Исмайлов].
