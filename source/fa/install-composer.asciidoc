[[install-composer]]
=== استفاده از Composer و Git برای دانلود فایل‌ها

[role="summary"]
چگونگی استفاده از ابزارهای Composer و Git برای مدیریت فایل‌های دروپال، افزونه‌ها و قالب‌های آن.

(((Composer tool,using to download the core software)))
(((Composer tool,using to download modules)))
(((Composer tool,using to download themes)))
(((Downloading,core software)))
(((Downloading,theme)))
(((Downloading,module)))
(((Software dependencies,managing)))
(((Module,downloading)))
(((Theme,downloading)))
(((Contributed theme,downloading)))
(((Contributed module,downloading)))

==== هدف

استفاده از Composer و Git برای دانلود فایل‌ها و وابستگی‌ها در دروپال، افزونه‌ها و قالب‌های آن.

==== دانش پیشنیاز

* <<install-tools>>
* <<install-dev-sites>>

==== پیشنیازهای سایت

اگر قصد استفاده از Git یا Composer را دارید، ابتدا باید روی سرور اصلی یا توسعه سایت شما نصب شوند. <<install-tools>> را مشاهده کنید.

==== گام‌ها

اگر نتوانستید ابزار Git یا Composer را در سرور سایت اصلی نصب کنید، پس از پیروی از گام‌های زیر در سرور محلی خود، نیاز دارید که تمام فایل‌های اضافه و بروزرسانی شده را به سرور اصلی سایت منتقل کنید. فرآیند توصیه‌شده استفاده از یک فایل بایگانی یا فشرده از تغییرات انجام شده، انتقال آن‌ها به سرور اصلی و قرار دادنشان در جای مناسب است. اگر از Composer استفاده می‌کنید، اطمینان یابید که بروزرسانی‌های فایل‌های زیر در بالاترین قسمت از محل نصب دروپال قرار گیرند:

* دایرکتوری _vendor_
* فایل _autoload.php_
* فایل _composer.json_
* فایل _composer.lock_

===== استفاده از Git برای دانلود یک پروژه

با استفاده از گام‌های زیر، نسخه توسعه دروپال یا افزونه‌ها و قالب‌های آن را از طریق مخزن کنترل نسخه Git دانلود کنید:

. در محیط خط-فرمان یک دایرکتوری بالاتر از محل قرارگیری دروپال بروید. برای دروپال این همان محل root است. برای یک افزونه خارجی، این می‌تواند دایرکتوری _modules_ یا _contrib_ تحت آن باشد.

. صفحه پروژه‌ای که قصد دانلود آن از _Drupal.org_ را دارید، شناسایی کنید؛ برای نمونه، https://www.drupal.org/project/drupal برای هسته دروپال یا https://www.drupal.org/project/admin_toolbar برای افزونه خارجی Admin Toolbar.

. روی پیوند _Version Control_ از بالای صفحه کلیک کنید، که با بازکردن صفحه‌ای دستورات Git مرتبط با این پروژه را نمایش می‌دهد.

. تحت عنوان _Setting Up Repository for the First Time_ یک رونوشت از دستور +git clone+ بگیرید و آن را در خط-فرمان قرار دهید. برای نمونه:
+
----
git clone --branch 8.2.x https://git.drupal.org/project/drupal.git
----

. این دستور یک دایرکتوری با نام کوتاه پروژه (_drupal_ در این مورد) ایجاد کرده و فایل‌های مورد نیاز را درون آن دانلود می‌کند. در صورت نیاز، نام دایرکتوری را تغییر دهید.

. اگر پروژه _drupal_ را دانلود کرده‌اید (نرم‌افزار هسته)، با استفاده از گام‌های زیر وابستگی‌های آن را نیز دانلود کنید.

. بعدها می‌توانید با اجرای دستور +git pull+ درون دایرکتوری به بروزرسانی آخرین نسخه از نرم‌افزار از طریق مخزن Git آن بپردازید.

===== استفاده از Composer برای دانلود وابستگی‌های خارجی دروپال

در صورت دانلود دروپال با استفاده از Git، گام‌های زیر را دنبال کنید تا تمام وابستگی‌های خارجی آن نصب گردند:

. به دایرکتوری root دروپال بروید.

. دستور +composer install+ را از خط-فرمان اجرا کنید. وابستگی‌های خارجی به صورت خودکار دانلود می‌شوند.

===== استفاده از Composer برای دانلود دروپال

در صورتی که دروپال را دانلود یا نصب نکرده‌اید، گام‌های زیر را دنبال کرده تا Composer هم دروپال هم تمام وابستگی‌های خارجی آن را دانلود کند:

. در خط-فرمان به یک دایرکتوری بالاتر از محل قرارگیری دروپال بروید.

. دستور زیر را وارد کنید، به صورتی که +my_site_name+ دایرکتوری مورد نظر شما برای دانلود دروپال باشد:
+
----
composer create-project drupal/drupal my_site_name
----

===== استفاده از Composer برای دانلود افزونه یا قالب

اگر دروپال را دانلود کرده‌اید و با استفاده از Composer قصد دانلود افزونه‌ها یا قالب‌های خارجی را دارید، گام‌های زیر را دنبال کنید (معمولا به این دلیل که این پروژه‌ها دارای وابستگی‌های خارجی هستند که Composer آن‌ها را دانلود می‌کند).

. اگر کار شما هم اکنون تمام نشده است، با استفاده از دستور زیر می‌توانید به Composer بگویید که محل ذخیره‌سازی افزونه‌ها و قالب‌ها کجاست:
+
----
composer config repositories.drupal composer https://packages.drupal.org/8
----

. هر زمان که قصد اضافه کردن یک افزونه یا قالب را دارید، نام کوتاه پروژه را مشخص کنید. این آخرین قسمت از نشانی صفحه پروژه است؛ برای نمونه افزونه Geofield در https://www.drupal.org/project/geofield دارای نام کوتاه +geofield+ است.

. برای دانلود افزونه یا قالب خارجی، به همراه تمام وابستگی‌های آن، دستور زیر را در root دروپال اجرا کنید (با جایگزینی نام افزونه یا قالب با +geofield+):
+
----
composer require drupal/geofield
----

===== استفاده از Composer برای بروزرسانی فایل‌های پروژه

پس از مدیریت وابستگی‌ها با استفاده از Composer، گام‌های زیر را دنبال کنید تا فایل‌های دروپال و افزونه و قالب‌های آن بروزرسانی گردند:

. نام کوتاه پروژه‌ای که قصد بروزرسانی آن را دارید، مشخص کنید. برای نرم‌افزار هسته، _drupal_ نام دارد. برای افزونه‌ها و قالب‌های خارجی آخرین قسمت از نشانی صفحه پروژه است؛ برای نمونه، افزونه Geofield در https://www.drupal.org/project/geofield دارای نام کوتاه +geofield+ است.

. شماره نسخه‌ای که قصد بروزرسانی به آن را دارید، مشخص کنید. برای نمونه، برای نسخه 8.x-1.7 یک افزونه خارجی می‌توانید فقط 1.7 یا برای دروپال نسخه 8.3.1 می‌توانید فقط 3.1 را وارد کنید.

. دستور زیر را در root دروپال اجرا کنید (با جایگزینی نام افزونه یا قالب با +geofield+ همراه با شماره نسخه صحیح):
+
----
composer require drupal/geofield:1.7
----

// ==== Expand your understanding

// ==== Related concepts

==== منابع مطالعاتی

https://www.drupal.org/docs/develop/using-composer/using-composer-with-drupal[صفحه "استفاده از Composer با دروپال" در مستندات جامعه کاربری _Drupal.org_]

*مشارکت‌کنندگان*

اقتباس توسط https://www.drupal.org/u/jhodgdon[Jennifer Hodgdon] از https://www.drupal.org/docs/develop/using-composer/using-composer-with-drupal[صفحه "استفاده از Composer با دروپال" در مستندات جامعه کاربری _Drupal.org_]

ترجمه توسط https://www.drupal.org/u/novid[Navid Emami]

کپی‌رایت ۲۰۱۷-۲۰۰۰ توسط مشارکت‌کنندگان انفرادی در  https://www.drupal.org/documentation[مستندات جامعه کاربری دروپال]
